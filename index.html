<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•˜ì†Œì¥ì˜ ì‹¤ì‹œê°„ ì´ìŠˆ ê²€ìƒ‰</title>
    <link rel="stylesheet" href="style.css">
    <!-- data.jsë¥¼ ê°€ì¥ ë¨¼ì € ë¡œë“œ -->
    <script src="data.js?v=20260208"></script>
</head>

<body>
    <!-- React ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // ë‚ ì§œ ê³„ì‚° í•¨ìˆ˜
        const isWithinPeriod = (dateStr, period) => {
            if (!dateStr) return true; // ë‚ ì§œ ì—†ìœ¼ë©´ ëª¨ë‘ í‘œì‹œ

            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const itemDate = new Date(dateStr);
            itemDate.setHours(0, 0, 0, 0);

            const diffTime = today - itemDate;
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

            if (period === 'today') return diffDays >= 0 && diffDays <= 0;
            if (period === '3days') return diffDays >= 0 && diffDays <= 3;
            if (period === '1week') return diffDays >= 0 && diffDays <= 7;
            if (period === '1month') return diffDays >= 0 && diffDays <= 30;
            return true;
        };

        // ì ìˆ˜ì— ë”°ë¥¸ ìƒ‰ìƒ ê·¸ë¼ë””ì–¸íŠ¸
        const getScoreColor = (score) => {
            if (score >= 15) return 'linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%)';
            if (score >= 10) return 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
            if (score >= 7) return 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
            return 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)';
        };

        // ì ìˆ˜ ë±ƒì§€ ì»´í¬ë„ŒíŠ¸
        const ScoreBadge = ({ score }) => (
            <div className="score-badge" style={{ background: getScoreColor(score) }}>
                <span className="score-value">{score}</span>
                <span className="score-label">ì </span>
            </div>
        );

        // ë‰´ìŠ¤ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
        const NewsCard = ({ item, index }) => (
            <div className="news-card" style={{ animationDelay: `${index * 0.05}s` }}>
                <div className="card-header">
                    <ScoreBadge score={item.ì¶”ì²œì ìˆ˜} />
                    <div className="card-meta">
                        <span className="source-badge">{item.ì¶œì²˜}</span>
                        <span className="date-badge">{item.ì—…ë¡œë“œì¼}</span>
                    </div>
                </div>

                <h3 className="news-title">{item.ì œëª©}</h3>

                {item.í‚¤ì›Œë“œ && (
                    <div className="keywords">
                        {item.í‚¤ì›Œë“œ.split(',').map((kw, i) => (
                            <span key={i} className="keyword-tag">{kw.trim()}</span>
                        ))}
                    </div>
                )}

                <div className="card-actions">
                    {item.ìœ íŠœë¸Œ_URL && (
                        <a href={item.ìœ íŠœë¸Œ_URL} target="_blank" rel="noopener noreferrer" className="action-btn youtube">
                            <span>â–¶</span> ìœ íŠœë¸Œ
                        </a>
                    )}
                    {item.ë‰´ìŠ¤ê¸°ì‚¬_URL && (
                        <a href={item.ë‰´ìŠ¤ê¸°ì‚¬_URL} target="_blank" rel="noopener noreferrer" className="action-btn news">
                            <span>ğŸ“°</span> ê¸°ì‚¬ ë³´ê¸°
                        </a>
                    )}
                    {item.ë‰´ìŠ¤ê¸°ì‚¬2_URL && (
                        <a href={item.ë‰´ìŠ¤ê¸°ì‚¬2_URL} target="_blank" rel="noopener noreferrer" className="action-btn related">
                            <span>ğŸ”—</span> ê´€ë ¨ ê¸°ì‚¬
                        </a>
                    )}
                </div>
            </div>
        );

        // í•„í„° íŒ¨ë„ ì»´í¬ë„ŒíŠ¸
        const FilterPanel = ({ category, setCategory, period, setPeriod }) => {
            const categories = ['ì •ì¹˜', 'ê²½ì œ', 'ì‚¬íšŒ', 'ì¥ë…„'];
            const periods = [
                { value: 'today', label: 'ì˜¤ëŠ˜' },
                { value: '3days', label: '3ì¼' },
                { value: '1week', label: '1ì£¼ì¼' },
                { value: '1month', label: '1ê°œì›”' }
            ];

            return (
                <div className="filter-panel">
                    <div className="filter-section">
                        <h3 className="filter-title">ğŸ“Œ ì£¼ì œ</h3>
                        <div className="filter-buttons">
                            {categories.map(cat => (
                                <button
                                    key={cat}
                                    className={`filter-btn ${category === cat ? 'active' : ''}`}
                                    onClick={() => setCategory(cat)}
                                >
                                    {cat}
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="filter-section">
                        <h3 className="filter-title">â° ê¸°ê°„</h3>
                        <div className="filter-buttons">
                            {periods.map(p => (
                                <button
                                    key={p.value}
                                    className={`filter-btn ${period === p.value ? 'active' : ''}`}
                                    onClick={() => setPeriod(p.value)}
                                >
                                    {p.label}
                                </button>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
        const App = () => {
            const [category, setCategory] = useState('ì •ì¹˜');
            const [period, setPeriod] = useState('today');

            const filteredData = useMemo(() => {
                if (!window.keywordData) return [];

                return window.keywordData
                    .filter(item => item.ì¹´í…Œê³ ë¦¬ === category)
                    .filter(item => isWithinPeriod(item.ì—…ë¡œë“œì¼, period))
                    .sort((a, b) => b.ì¶”ì²œì ìˆ˜ - a.ì¶”ì²œì ìˆ˜);
            }, [category, period]);

            return (
                <div className="app">
                    <header className="app-header">
                        <div className="header-content">
                            <div className="logo-section">
                                <div className="logo-icon">ğŸ”¥</div>
                                <div>
                                    <h1 className="app-title">í•˜ì†Œì¥ì˜ ì‹¤ì‹œê°„ ì´ìŠˆ ê²€ìƒ‰</h1>
                                    <p className="app-subtitle">AI ê¸°ë°˜ í‚¤ì›Œë“œ ë¶„ì„ ì‹œìŠ¤í…œ</p>
                                </div>
                            </div>
                            <div className="stats-badge">
                                <span className="stats-number">{filteredData.length}</span>
                                <span className="stats-label">ê°œ ì´ìŠˆ</span>
                            </div>
                        </div>
                    </header>

                    <main className="app-main">
                        <FilterPanel
                            category={category}
                            setCategory={setCategory}
                            period={period}
                            setPeriod={setPeriod}
                        />

                        <div className="news-grid">
                            {filteredData.length > 0 ? (
                                filteredData.map((item, index) => (
                                    <NewsCard key={index} item={item} index={index} />
                                ))
                            ) : (
                                <div className="empty-state">
                                    <div className="empty-icon">ğŸ“­</div>
                                    <h3>í•´ë‹¹ ê¸°ê°„ì— ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                                    <p>ë‹¤ë¥¸ ê¸°ê°„ì„ ì„ íƒí•´ë³´ì„¸ìš”</p>
                                </div>
                            )}
                        </div>
                    </main>

                    <footer className="app-footer">
                        <p>Â© 2026 í•˜ì†Œì¥ì˜ ì‹¤ì‹œê°„ ì´ìŠˆ ê²€ìƒ‰ | Powered by AI</p>
                    </footer>
                </div>
            );
        };

        // ë Œë”ë§
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>